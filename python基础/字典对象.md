## 字典操作

- #### 为字典加上点语法

  ```python
  class Ddict(dict):
      """
      - 为字典加上点语法. 例如:
      # >>> o = Ddict({'a':1})
      # >>> o.a
      # >>> 1
      # >>> o.b
      # >>> None
      """
  
      def __init__(self, dictobj={}):
          self.update(dictobj)
  
      def __getattr__(self, name):
          # Pickle is trying to get state from your object, and dict doesn't implement it.
          # Your __getattr__ is being called with "__getstate__" to find that magic method,
          # and returning None instead of raising AttributeError as it should.
          if name.startswith('__'):
              raise AttributeError
          return self.get(name)
  
      def __setattr__(self, name, val):
          self[name] = val
  
      def __hash__(self):
          return id(self)
  
  
  if __name__ == '__main__':
      dd = Ddict()
      dd.aa = 'aa'
      dd.cc = 'cc'
      print(dd)		# {'aa': 'aa', 'cc': 'cc'}
      print(dd.aa)	# aa
      print(dd.cc)	# cc
  ```

- #### 合并字典，解析字典

  ```python
  def dict_append():
      """
      合并两个字典，解析字典
      """
      obj_1 = {"id": 1, "name": "王小明"}
      obj_2 = dict(**obj_1)
      print('字典不变：', obj_2)	# {'id': 1, 'name': '王小明'}
      obj_3 = {"age": 18}
      obj_4 = dict(obj_1, **obj_3)
      print('字典合并：', obj_4)	# {'id': 1, 'name': '王小明', 'age': 18}
      obj_5 = {"id": 2, "info": {"name": "李晓文", "age": 20}}
      obj_6 = dict(id=2, test=123, **obj_5.get('info'))
      print('字典解析：', obj_6)	# {'id': 2, 'test': 123, 'name': '李晓文', 'age': 20}
      return ''
  ```

- #### 字典键值互换

  ```python
  def dict_reverse():
      """
      字典键值互换，利用推导机制（列表推导式）
      """
      chile_ranks = {'ghost': 1, 'habanero': 2, 'cayenne': 3}
      rank_dict = {y: x for x, y in chile_ranks.items()}
      print(rank_dict)	# {1: 'ghost', 2: 'habanero', 3: 'cayenne'}
      chile_len_set = {len(x) for x in rank_dict.values()}  # 集合也可以利用推导机制
      print(chile_len_set)	# {8, 5, 7}
      return ''
  ```

- #### 小知识

  ```python
  def little_knowledge():
      """
      小知识点
      1.获取字典键值对并改变，可能同步更新字典
      """
      a = {}
      # 不存在键时增加键值对，后续更新返回值会同步更新字典,主要看键值对的值是否是可变数据类型
      b = a.setdefault(1, [])  
      print(a, b)  # {1: []} []
      b.append(123)
      print(a, b)  # {1: [123]} [123]
      # 存在键时直接获取, 后续更新返回值会同步更新字典, 代码等效与 c = a.setdefault(1)
      c = a.setdefault(1, None)  
      c.append(456)
      print(a, c)  # {1: [123, 456]} [123, 456]
      aa = {1: [], 2: 2}
      bb = aa[1]
      bb.append(123)
      cc = aa[2]
      cc += 1
      print(bb, cc, aa)   # [123] 3 {1: [123], 2: 2}
      # 获取字典的内容并改变,如果原来字典的值是可变数据类型，则原字典会随之改变
      return ''
  ```

  